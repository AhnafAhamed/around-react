(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{17:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(8),s=n.n(r),i=(n(7),n(11)),o=n(2),u=n.p+"static/media/logo.c7581985.svg",l=n(0);var p=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("img",{className:"header__logo",src:u,alt:"Around the US Logo"})})})},d=Object(a.createContext)(null);var j=function(e){var t=e.onCardClick,n=e.onCardLike,c=e.onCardDelete,r=e.card,s=Object(a.useContext)(d),i=r.owner._id===s._id,o=r.likes.some((function(e){return e._id===s._id})),u="".concat(i?"elements__delete-icon":"elements__delete-icon_hidden"),p="".concat(o?"elements__heart-icon_liked elements__heart-icon":"elements__heart-icon");return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("li",{className:"elements__card",children:[Object(l.jsx)("img",{onClick:function(){t(r)},src:r.link,alt:r.name,className:"elements__image"}),Object(l.jsxs)("div",{className:"elements__info",children:[Object(l.jsx)("h2",{className:"elements__title",children:r.name}),Object(l.jsxs)("div",{className:"elements__likes",children:[Object(l.jsx)("button",{type:"button",className:p,onClick:function(){return n(r)},"aria-label":"Heart Button"}),Object(l.jsx)("span",{className:"elements__like-counter",children:r.likes.length})]})]}),Object(l.jsx)("button",{className:u,onClick:function(){return c(r)},type:"button","aria-label":"Delete Button"})]})})};var b=function(e){var t=e.onEditAvatarClick,n=e.onEditProfileClick,c=e.onAddPlaceClick,r=e.onCardClick,s=e.onCardLike,i=e.onCardDelete,o=e.cards,u=Object(a.useContext)(d);return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("main",{className:"main",children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsx)("div",{className:"profile__picture",onClick:t,children:Object(l.jsx)("img",{src:u.avatar,alt:"Jacques Cousteau",className:"profile__image"})}),Object(l.jsxs)("div",{className:"profile__info",children:[Object(l.jsx)("h1",{className:"profile__title",children:u.name}),Object(l.jsx)("button",{type:"button",className:"profile__edit-button","aria-label":"Edit Button",onClick:n}),Object(l.jsx)("p",{className:"profile__tag",children:u.about})]}),Object(l.jsx)("button",{type:"button",className:"profile__plus-button","aria-label":"Plus Button",onClick:c})]}),Object(l.jsx)("section",{children:Object(l.jsx)("ul",{className:"elements",children:Object(l.jsx)(l.Fragment,{children:o.map((function(e){return Object(l.jsx)(j,{card:e,onCardDelete:i,onCardLike:s,onCardClick:r},e._id)}))})})})]})})};var h=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("p",{className:"footer__text",children:"\xa9 2020 Around The U.S."})})})},m=n(9),_=n(10),f=new(function(){function e(t){Object(m.a)(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}return Object(_.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error")}},{key:"renderUserInfo",value:function(){var e=this;return fetch(this.baseUrl+"/users/me",{headers:this.headers,method:"GET"}).then((function(t){return e._checkResponse(t)}))}},{key:"renderCards",value:function(){var e=this;return fetch(this.baseUrl+"/cards",{headers:this.headers,method:"GET"}).then((function(t){return e._checkResponse(t)}))}},{key:"addCard",value:function(e){var t=this,n=e.name,a=e.link;return fetch(this.baseUrl+"/cards",{headers:this.headers,method:"POST",body:JSON.stringify({name:n,link:a})}).then((function(e){return t._checkResponse(e)}))}},{key:"setUserInfo",value:function(e){var t=this,n=e.name,a=e.about;return fetch(this.baseUrl+"/users/me/",{headers:this.headers,method:"PATCH",body:JSON.stringify({name:n,about:a})}).then((function(e){return t._checkResponse(e)}))}},{key:"setUserAvatar",value:function(e){var t=this;return fetch(this.baseUrl+"/users/me/avatar",{headers:this.headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch(this.baseUrl+"/cards/likes/"+e,{headers:this.headers,method:"PUT"}).then((function(e){return t._checkResponse(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch(this.baseUrl+"/cards/likes/"+e,{headers:this.headers,method:"DELETE"}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch(this.baseUrl+"/cards/"+e,{headers:this.headers,method:"DELETE"}).then((function(e){return t._checkResponse(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-13",headers:{authorization:"4bb4f649-ce49-4e5f-81c2-ac119aac9e7d","Content-Type":"application/json"}});var O=function(e){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{onClick:e.onClose,className:"popup popup_".concat(e.name," ").concat(e.isOpen?"popup_open":""),children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsx)("h3",{className:"popup__title popup__title_".concat(e.name),children:e.title}),Object(l.jsxs)("form",{onSubmit:e.onSubmit,action:"POST",className:"popup__form popup__form_".concat(e.name),name:"".concat(e.name),children:[e.children,Object(l.jsx)("button",{type:"submit",className:"popup__btn","aria-label":"Save Button",children:e.buttonText})]}),Object(l.jsx)("button",{type:"button",className:"popup__close-btn","aria-label":"Close Button",onClick:e.onClose})]})})})};var x=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,r=Object(a.useState)(""),s=Object(o.a)(r,2),i=s[0],u=s[1],p=Object(a.useState)(""),j=Object(o.a)(p,2),b=j[0],h=j[1],m=Object(a.useContext)(d);return Object(a.useEffect)((function(){u(m.name),h(m.about)}),[m,t]),Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(O,{onSubmit:function(e){e.preventDefault(),c({name:i,about:b})},name:"profile",title:"Edit Profile",buttonText:"Save",isOpen:t,onClose:n,children:[Object(l.jsx)("input",{id:"profile-title-input",name:"name",type:"text",className:"popup__input popup__input_value_name",placeholder:"Name",value:i||"",minLength:"2",maxLength:"40",onChange:function(e){u(e.target.value)},required:!0}),Object(l.jsx)("span",{id:"profile-title-input-error",className:"popup__input-error"}),Object(l.jsx)("input",{id:"profile-about-input",name:"about",type:"text",className:"popup__input popup__input_value_about",placeholder:"About Me",value:b||"",minLength:"2",maxLength:"200",onChange:function(e){h(e.target.value)},required:!0}),Object(l.jsx)("span",{id:"profile-about-input-error",className:"popup__input-error"})]})})};var v=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,r=Object(a.useRef)();return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(O,{name:"avatar",title:"Change Profile Picture",buttonText:"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c(r.current.value)},children:[Object(l.jsx)("input",{ref:r,id:"image-link-input",name:"avatar",type:"url",className:"popup__input popup__input_profile_link",placeholder:"url",defaultValue:"",minLength:"2",maxLength:"250",required:!0}),Object(l.jsx)("span",{id:"image-link-input-error",className:"popup__input-error popup__input-error_profile-image"}),Object(l.jsx)("span",{id:"profile-about-input-error",className:"popup__input-error"})]})})},k=n(6);var C=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddCard,c=Object(k.useState)(""),r=Object(o.a)(c,2),s=r[0],i=r[1],u=Object(k.useState)(""),p=Object(o.a)(u,2),d=p[0],j=p[1];return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(O,{name:"card",title:"New Place",buttonText:"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:s,link:d}),i(""),j("")},children:[Object(l.jsx)("input",{id:"card-title-input",onChange:function(e){i(e.target.value)},name:"name",type:"text",className:"popup__input popup__input_place_name",placeholder:"Name",defaultValue:s,minLength:"2",maxLength:"250",required:!0}),Object(l.jsx)("span",{id:"card-title-input-error",className:"popup__input-error"}),Object(l.jsx)("input",{id:"card-link-input",onChange:function(e){j(e.target.value)},name:"link",type:"url",className:"popup__input popup__input_place_image-url",placeholder:"Image URL",defaultValue:d,minLength:"2",maxLength:"250",required:!0}),Object(l.jsx)("span",{id:"card-link-input-error",className:"popup__input-error"})]})})};var g=function(e){var t=e.card,n=e.onClose,a=e.isOpen;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{onClick:n,className:"popup popup_image-expanded ".concat(a?"popup_open":""),children:Object(l.jsx)("div",{className:"image-expanded",children:Object(l.jsxs)("div",{className:"image-expanded__container",children:[Object(l.jsx)("img",{src:t?t.link:"#",alt:t?t.name:"",className:"image-expanded__image"}),Object(l.jsx)("h2",{className:"image-expanded__title",children:t?t.name:""}),Object(l.jsx)("button",{onClick:n,className:"popup__close-btn",type:"button"})]})})})})};var N=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(o.a)(r,2),u=s[0],j=s[1],m=Object(a.useState)(!1),_=Object(o.a)(m,2),O=_[0],k=_[1],N=Object(a.useState)(!1),y=Object(o.a)(N,2),S=y[0],L=y[1],U=Object(a.useState)(null),E=Object(o.a)(U,2),P=E[0],T=E[1],A=Object(a.useState)([]),F=Object(o.a)(A,2),D=F[0],R=F[1],B=Object(a.useState)([]),I=Object(o.a)(B,2),q=I[0],J=I[1];function w(){c(!1),j(!1),k(!1),L(!1),T(null)}function H(e){(e.target.classList.contains("popup_open")||e.target.classList.contains("popup__close-btn"))&&w()}return Object(a.useEffect)((function(){f.renderUserInfo().then((function(e){J(e)}))}),[]),Object(a.useEffect)((function(){f.renderCards().then((function(e){R(e)}))}),[]),document.addEventListener("keyup",(function(e){"Escape"===e.key&&w()})),Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(d.Provider,{value:q,children:Object(l.jsxs)("div",{className:"body",children:[Object(l.jsx)(p,{}),Object(l.jsxs)("div",{className:"homepage",children:[Object(l.jsx)(b,{cards:D,onCardDelete:function(e){f.deleteCard(e._id).then((function(){var t=D.filter((function(t){return t._id!==e._id}));R(t)}))},onCardLike:function(e){(!1===e.likes.some((function(e){return e._id===q._id}))?f.addLike(e._id):f.removeLike(e._id)).then((function(t){var n=D.map((function(n){return n._id===e._id?t:n}));R(n)}))},onCardClick:function(e){T(e),L(!0)},onEditProfileClick:function(){c(!0)},onEditAvatarClick:function(){j(!0)},onAddPlaceClick:function(){k(!0)}}),Object(l.jsx)(h,{}),Object(l.jsx)(x,{isOpen:n,onClose:H,onUpdateUser:function(e){var t=e.name,n=e.about;f.setUserInfo({name:t,about:n}).then((function(e){J(e),w()}))}}),Object(l.jsx)(v,{isOpen:u,onClose:H,onUpdateAvatar:function(e){f.setUserAvatar(e).then((function(e){J(e),w()}))}}),Object(l.jsx)(C,{isOpen:O,onClose:H,onAddCard:function(e){var t=e.name,n=e.link;f.addCard({name:t,link:n}).then((function(e){R([e].concat(Object(i.a)(D))),w()}))}}),Object(l.jsx)(g,{card:P,isOpen:S,onClose:H})]})]})})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),y()},7:function(e,t,n){}},[[17,1,2]]]);
//# sourceMappingURL=main.26834016.chunk.js.map